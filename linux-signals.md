# Linux Signals
Understanding signals are tricky in Linux. I have to be honest, I am not completely aware of all the types of signals that possibly exist, I only came across a few commonly used ones. This article provides an overview of commonly encountered signals and how to handle signals in a bash script.

# What is a Signal?
A signal is an event generated by the system in response to a specific condition. When a process receives a signal it may take an action. A standard signal has a default disposition and it determines the behavior of the process after it is delivered.

Signals can be sent to a process when the system detects a software event. It can either be a user-generated signal or a process generated signal. A kernel could also send a signal when a hardware event has occurred or to note that an I/O event is completed.

The default disposition for each standard signal can be one of the following options as specified in the manpage:

```
Term   Default action is to terminate the process
Ign    Default action is to ignore the signal
Core   Default action is to terminate the process and dump core (see core(5))
Stop   Default action is to stop the process
Cont   Default action is to continue the process if it is currently stopped
```

When a process receives a signal it can choose to take one of these actions
- Execute the default disposition of the signal
- block the signal by setting a signal mask
- replace the default disposition with a custom action using the signal system call

# What are the types of signals?

Every signal falls into one of the five classes:
- Process Control
- Resource Control
- I/O Notification
- Hardware Condition
- Software Condition

Linux supports a lot of signals. You can find a lot about it on the official man page (man 7 signal). To see a list of all the available signals on the system, run the command `kill -l`

# How to send a signal?
Apart from the keyboard signals like <ctrl>+\ and <ctrl>-c , the kill command can be used to send specific signals to a process by using the process’s PID.
```
# sends a SIGINT
kill -2 <pid> <pid>
# sends a SIGKILL
kill -9 <pid>
#sends a SIGQUIT
kill --signal SIGQUIT <pid>
```
If you want to delete all processes of the same type, kill-all comes in handy
```
# kills all ssh processes
kill-all ssh
```

# How to trap a signal?
This section is specific to trapping a signal in bash. The command that comes in handy to do something when the process receives a specific signal is the trap command.

The trap command can be used in shell scripts for following reasons
- cleaning up files
- Ignoring signals

```
trap commands signals
```

Example usage for trap command to cleanup before executing is as follows
```
trap "rm -f ${BASH_SOURCE%/*}/tmp_data; exit" 2
```
The above command removes the tmp_data file that gets created in the source directory of the script. The `exit` at the end is important for the process to terminate when it encounters signal 2, otherwise, the process deletes the file tmp_data and continues to execute from the point in the program where the SIGINT (2) was invoked.

# Tips and Tricks:
- Do not use the SIGKILL (9) unless you have gracefully tried to kill the process with SIGTERM
- You can choose to not do anything when encountered with a specific signal type
```
trap ‘ ‘ 2
```